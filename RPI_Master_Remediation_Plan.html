<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RPI Master Remediation Plan - February 2026</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      max-width: 8.5in;
      margin: 0 auto;
      padding: 0.5in;
      font-size: 11pt;
      line-height: 1.4;
      color: #1a1a1a;
    }
    h1 { font-size: 18pt; margin-bottom: 5px; color: #1e3a5f; border-bottom: 3px solid #1e3a5f; padding-bottom: 10px; }
    h2 { font-size: 14pt; margin-top: 20px; margin-bottom: 10px; color: #1e3a5f; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
    h3 { font-size: 12pt; margin-top: 15px; margin-bottom: 8px; color: #333; }
    table { width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 10pt; }
    th, td { border: 1px solid #ccc; padding: 6px 8px; text-align: left; }
    th { background: #1e3a5f; color: white; font-weight: 600; }
    tr:nth-child(even) { background: #f8f9fa; }
    .checkbox { width: 18px; text-align: center; }
    .critical { background: #fee2e2 !important; }
    .high { background: #fef3c7 !important; }
    .phase { background: #e0e7ff; font-weight: 600; }
    .subtitle { color: #666; font-size: 12pt; margin-bottom: 20px; }
    .summary-box { background: #f0f9ff; border: 1px solid #0284c7; border-radius: 8px; padding: 15px; margin: 15px 0; }
    .alert-box { background: #fef2f2; border: 1px solid #dc2626; border-radius: 8px; padding: 15px; margin: 15px 0; }
    .stats { display: flex; gap: 20px; margin: 15px 0; }
    .stat { background: #f1f5f9; padding: 10px 15px; border-radius: 8px; text-align: center; }
    .stat-value { font-size: 24pt; font-weight: 700; color: #1e3a5f; }
    .stat-label { font-size: 9pt; color: #666; }
    ul { margin: 5px 0; padding-left: 20px; }
    li { margin: 3px 0; }
    .page-break { page-break-before: always; }
    @media print {
      body { padding: 0.25in; }
      .no-print { display: none; }
    }
  </style>
</head>
<body>

<h1>RPI Master Remediation Plan</h1>
<p class="subtitle">Generated: February 4, 2026 | Audit by Claude Code GA</p>

<div class="stats">
  <div class="stat"><div class="stat-value">16</div><div class="stat-label">Projects Audited</div></div>
  <div class="stat"><div class="stat-value">7</div><div class="stat-label">Critical Issues</div></div>
  <div class="stat"><div class="stat-value">30+</div><div class="stat-label">High Priority Items</div></div>
  <div class="stat"><div class="stat-value">30</div><div class="stat-label">Uncommitted Files</div></div>
</div>

<div class="alert-box">
  <strong>IMMEDIATE ACTION REQUIRED:</strong> 4 security issues with exposed API keys/tokens need rotation TODAY.
</div>

<h2>Executive Summary</h2>

<div class="summary-box">
  <strong>What We Found:</strong>
  <ul>
    <li>4 projects with exposed API keys/tokens in source code</li>
    <li>4 projects with forbidden patterns (alert/confirm/prompt)</li>
    <li>9+ projects missing JSON serialization safety pattern</li>
    <li>8 projects need DevTools consolidation</li>
    <li>ALL 15 projects missing "Required References" section in CLAUDE.md</li>
    <li>5 projects with uncommitted changes (30 files total)</li>
  </ul>
</div>

<h2>Phase 1: Critical Security (Do Today)</h2>

<table>
  <tr><th class="checkbox">Done</th><th>Project</th><th>Issue</th><th>Action Required</th></tr>
  <tr class="critical">
    <td class="checkbox">[ ]</td>
    <td><strong>CEO-Dashboard</strong></td>
    <td>Exposed Slack token in Code.gs:521</td>
    <td>Remove from source, rotate token in Slack</td>
  </tr>
  <tr class="critical">
    <td class="checkbox">[ ]</td>
    <td><strong>CEO-Dashboard</strong></td>
    <td>Exposed Claude API key in Code.gs:552</td>
    <td>Remove from source, rotate key in Anthropic console</td>
  </tr>
  <tr class="critical">
    <td class="checkbox">[ ]</td>
    <td><strong>MCP-Hub</strong></td>
    <td>Exposed Slack tokens in mcp.json:25-28</td>
    <td>Move to .env file, rotate tokens</td>
  </tr>
  <tr class="critical">
    <td class="checkbox">[ ]</td>
    <td><strong>RAPID_API</strong></td>
    <td>No API authentication</td>
    <td>Add API key validation in handleRequest()</td>
  </tr>
  <tr class="critical">
    <td class="checkbox">[ ]</td>
    <td><strong>RAPID_IMPORT</strong></td>
    <td>Infinite recursion bug in IMPORT_Client.gs:37</td>
    <td>Change getMatrixSpreadsheet_() to SpreadsheetApp.getActiveSpreadsheet()</td>
  </tr>
</table>

<h2>Phase 2: Forbidden Patterns (Do This Week)</h2>

<table>
  <tr><th class="checkbox">Done</th><th>Project</th><th>File:Line</th><th>Issue</th><th>Fix</th></tr>
  <tr class="high">
    <td class="checkbox">[ ]</td>
    <td><strong>RIIMO</strong></td>
    <td>Index.html:1321</td>
    <td>confirm()</td>
    <td>Replace with showConfirmation()</td>
  </tr>
  <tr class="high">
    <td class="checkbox">[ ]</td>
    <td><strong>DEX</strong></td>
    <td>Scripts.html:934</td>
    <td>prompt()</td>
    <td>Replace with custom input modal</td>
  </tr>
  <tr class="high">
    <td class="checkbox">[ ]</td>
    <td><strong>sentinel</strong></td>
    <td>Index.html:18990</td>
    <td>confirm()</td>
    <td>Replace with showConfirmation()</td>
  </tr>
  <tr class="high">
    <td class="checkbox">[ ]</td>
    <td><strong>sentinel</strong></td>
    <td>Index.html:18925</td>
    <td>prompt()</td>
    <td>Replace with showInputModal()</td>
  </tr>
</table>

<h2>Phase 3: GAS Gotchas - JSON Serialization</h2>

<p><strong>Rule:</strong> All *ForUI() functions must use <code>JSON.parse(JSON.stringify(result))</code> before returning to prevent Date serialization bugs.</p>

<table>
  <tr><th class="checkbox">Done</th><th>Project</th><th>Files Affected</th></tr>
  <tr><td class="checkbox">[ ]</td><td>RIIMO</td><td>Code.gs - all ui* functions</td></tr>
  <tr><td class="checkbox">[ ]</td><td>DEX</td><td>DEX_Pipeline.gs - 4 ForUI functions</td></tr>
  <tr><td class="checkbox">[ ]</td><td>sentinel</td><td>SENTINEL_StatementUpload.gs:1286</td></tr>
  <tr><td class="checkbox">[ ]</td><td>sentinel-v2</td><td>SENTINEL_Database.gs, SENTINEL_Analysis.gs</td></tr>
  <tr><td class="checkbox">[ ]</td><td>CAM</td><td>Code.gs - handleClientRequest():449</td></tr>
  <tr><td class="checkbox">[ ]</td><td>DAVID-HUB</td><td>Config.gs - getHYPOConfig, getSPHConfig, getQualificationConfig</td></tr>
  <tr><td class="checkbox">[ ]</td><td>CEO-Dashboard</td><td>Code.gs - api() function:434</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RPI-Command-Center</td><td>Code.gs - 12 ui* functions, CC_Dashboard.gs</td></tr>
</table>

<h2>Phase 3b: GAS Gotchas - Caching (let → var)</h2>

<p><strong>Rule:</strong> Use <code>var</code> not <code>let</code> for module-level caching variables in GAS.</p>

<table>
  <tr><th class="checkbox">Done</th><th>Project</th><th>File</th><th>Variables</th></tr>
  <tr><td class="checkbox">[ ]</td><td>sentinel</td><td>SENTINEL_Medicare.gs:21</td><td>_cmsPlansCache</td></tr>
  <tr><td class="checkbox">[ ]</td><td>sentinel</td><td>SENTINEL_AgencySetup.gs:165,183</td><td>_compGridCache, _carrierMasterCache</td></tr>
  <tr><td class="checkbox">[ ]</td><td>PRODASH</td><td>PRODASH_Clients.gs:40,56,57,144</td><td>_RAPID_API_URL, _clientMatrixCache, _clientMatrixCacheTime, _accountTypesCache</td></tr>
  <tr><td class="checkbox">[ ]</td><td>PRODASH</td><td>PRODASH_Accounts.gs:19</td><td>_accountMatrixCacheTime</td></tr>
  <tr><td class="checkbox">[ ]</td><td>CEO-Dashboard</td><td>CEO_Slack.gs:99</td><td>userCache</td></tr>
</table>

<div class="page-break"></div>

<h2>Phase 4: CLAUDE.md Alignment</h2>

<h3>4a. Add "Required References" Section (ALL Projects)</h3>

<p>The Belt & Suspenders protocol needs to be added to every project's CLAUDE.md:</p>

<table>
  <tr><th class="checkbox">Done</th><th>Project</th><th>References Needed</th></tr>
  <tr><td class="checkbox">[ ]</td><td>PRODASH</td><td>compliance/COMPLIANCE_STANDARDS.md (handles client PII)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>C3</td><td>integrations/GHL_INTEGRATION.md (uses GHL)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>CAM</td><td>(determine applicable refs)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>CEO-Dashboard</td><td>(determine applicable refs)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>DEX</td><td>(determine applicable refs)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>MCP-Hub</td><td>(determine applicable refs)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>PDF_SERVICE</td><td>(determine applicable refs)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_API</td><td>(determine applicable refs)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_CORE</td><td>(determine applicable refs)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_IMPORT</td><td>integrations/GHL_INTEGRATION.md (imports from GHL)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RIIMO</td><td>integrations/MATRIX_CONFIG.md (uses MATRIX sheets)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RPI-Command-Center</td><td>(determine applicable refs)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>DAVID-HUB</td><td>(determine applicable refs)</td></tr>
  <tr><td class="checkbox">[ ]</td><td>sentinel</td><td>integrations/GHL_INTEGRATION.md, integrations/MATRIX_CONFIG.md</td></tr>
  <tr><td class="checkbox">[ ]</td><td>sentinel-v2</td><td>integrations/MATRIX_CONFIG.md</td></tr>
</table>

<h3>4b. Add Missing Sections</h3>

<table>
  <tr><th class="checkbox">Done</th><th>Project</th><th>Missing Section</th></tr>
  <tr><td class="checkbox">[ ]</td><td>PDF_SERVICE</td><td>Development Standards</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_API</td><td>Development Standards, Deployment ID</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_CORE</td><td>Development Standards, Deployment ID</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_IMPORT</td><td>Script ID, Deployment ID</td></tr>
  <tr><td class="checkbox">[ ]</td><td>C3</td><td>Deployment ID</td></tr>
  <tr><td class="checkbox">[ ]</td><td>CAM</td><td>Related Projects</td></tr>
  <tr><td class="checkbox">[ ]</td><td>MCP-Hub</td><td>Related Projects</td></tr>
</table>

<h2>Phase 5: Code Organization (Next Week)</h2>

<h3>5a. Create DevTools.gs Files</h3>

<p>Consolidate scattered DEBUG/SETUP/TEST/FIX functions into dedicated DevTools files:</p>

<table>
  <tr><th class="checkbox">Done</th><th>Project</th><th>Scattered Functions</th><th>Files Affected</th></tr>
  <tr><td class="checkbox">[ ]</td><td>sentinel</td><td>83 functions</td><td>15 files</td></tr>
  <tr><td class="checkbox">[ ]</td><td>CAM</td><td>8+ functions</td><td>8 files</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_CORE</td><td>Multiple</td><td>9 files</td></tr>
  <tr><td class="checkbox">[ ]</td><td>DAVID-HUB</td><td>11 functions</td><td>5 files</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_IMPORT</td><td>8+ functions</td><td>3 files</td></tr>
  <tr><td class="checkbox">[ ]</td><td>PRODASH</td><td>Several</td><td>3 files</td></tr>
  <tr><td class="checkbox">[ ]</td><td>CEO-Dashboard</td><td>10 functions</td><td>3 files</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RIIMO</td><td>Several</td><td>1 file</td></tr>
</table>

<h3>5b. Fix Hardcoded Colors</h3>

<table>
  <tr><th class="checkbox">Done</th><th>Project</th><th>Locations</th><th>Action</th></tr>
  <tr><td class="checkbox">[ ]</td><td>C3</td><td>Index.html (100+ instances)</td><td>Convert inline styles to CSS classes</td></tr>
  <tr><td class="checkbox">[ ]</td><td>PRODASH</td><td>Index.html (5 locations)</td><td>Create account-type color classes</td></tr>
  <tr><td class="checkbox">[ ]</td><td>sentinel</td><td>Index.html (modals, forms)</td><td>Convert to CSS variables</td></tr>
</table>

<h2>Phase 6: Uncommitted Changes (Do Today)</h2>

<table>
  <tr><th class="checkbox">Done</th><th>Project</th><th>Files</th><th>Key Changes</th></tr>
  <tr><td class="checkbox">[ ]</td><td>MCP-Hub</td><td>14 files</td><td>Data files, sync scripts, document processor</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_API</td><td>5 files</td><td>API_GHL_Sync, Code.gs, new Activity/Import modules</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_CORE</td><td>3 files</td><td>Database, Drive, SETUP_MATRIX</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RAPID_IMPORT</td><td>2 files</td><td>Code.gs, IMPORT_Client</td></tr>
  <tr><td class="checkbox">[ ]</td><td>RPI-Command-Center</td><td>6 files</td><td>CC_Intake.gs, Executive docs</td></tr>
</table>

<div class="page-break"></div>

<h2>Appendix A: Full Code Review Results</h2>

<table>
  <tr><th>Project</th><th>Critical</th><th>High</th><th>Top Issue</th></tr>
  <tr class="critical"><td>CEO-Dashboard</td><td>2</td><td>2</td><td>EXPOSED API KEYS</td></tr>
  <tr class="critical"><td>MCP-Hub</td><td>1</td><td>2</td><td>EXPOSED SLACK TOKENS</td></tr>
  <tr class="critical"><td>RAPID_API</td><td>1</td><td>2</td><td>NO API AUTHENTICATION</td></tr>
  <tr class="critical"><td>RAPID_IMPORT</td><td>1</td><td>2</td><td>Infinite recursion bug</td></tr>
  <tr class="high"><td>RIIMO</td><td>1</td><td>1</td><td>confirm() forbidden pattern</td></tr>
  <tr class="high"><td>DEX</td><td>1</td><td>1</td><td>prompt() forbidden pattern</td></tr>
  <tr class="high"><td>sentinel</td><td>2</td><td>2</td><td>confirm() + prompt() forbidden</td></tr>
  <tr><td>RAPID_CORE</td><td>0</td><td>4</td><td>clearAllCache() bug</td></tr>
  <tr><td>PRODASH</td><td>0</td><td>2</td><td>Hardcoded colors, let→var</td></tr>
  <tr><td>CAM</td><td>0</td><td>3</td><td>JSON serialization, DEBUG scatter</td></tr>
  <tr><td>DAVID-HUB</td><td>0</td><td>2</td><td>JSON serialization, DEBUG scatter</td></tr>
  <tr><td>C3</td><td>0</td><td>2</td><td>100+ inline color styles</td></tr>
  <tr><td>sentinel-v2</td><td>0</td><td>5</td><td>JSON serialization, incomplete saves</td></tr>
  <tr><td>RPI-Command-Center</td><td>0</td><td>2</td><td>JSON serialization</td></tr>
  <tr><td>PDF_SERVICE</td><td>-</td><td>-</td><td>(Review incomplete)</td></tr>
</table>

<h2>Appendix B: CLAUDE.md Audit Results</h2>

<table>
  <tr><th>Project</th><th>Lines</th><th>Deploy</th><th>Standards</th><th>Req Refs</th><th>Related</th><th>Script ID</th><th>Deploy ID</th></tr>
  <tr><td>PRODASH</td><td>110</td><td>Y</td><td>Y</td><td>N</td><td>Y</td><td>Y</td><td>Y</td></tr>
  <tr><td>C3</td><td>135</td><td>Y</td><td>Y</td><td>N</td><td>Y</td><td>Y</td><td>N</td></tr>
  <tr><td>CAM</td><td>91</td><td>Y</td><td>Y</td><td>N</td><td>N</td><td>Y</td><td>Y</td></tr>
  <tr><td>CEO-Dashboard</td><td>88</td><td>Y</td><td>Y</td><td>N</td><td>Y</td><td>Y</td><td>Y</td></tr>
  <tr><td>DEX</td><td>119</td><td>Y</td><td>Y</td><td>N</td><td>Y</td><td>Y</td><td>Y</td></tr>
  <tr><td>MCP-Hub</td><td>96</td><td>N</td><td>Y</td><td>N</td><td>N</td><td>N/A</td><td>N/A</td></tr>
  <tr><td>PDF_SERVICE</td><td>129</td><td>Y</td><td>N</td><td>N</td><td>Y</td><td>N/A</td><td>N/A</td></tr>
  <tr><td>RAPID_API</td><td>140</td><td>Y</td><td>N</td><td>N</td><td>Y</td><td>Y</td><td>N</td></tr>
  <tr><td>RAPID_CORE</td><td>119</td><td>Y</td><td>N</td><td>N</td><td>Y</td><td>Y</td><td>N</td></tr>
  <tr><td>RAPID_IMPORT</td><td>91</td><td>Y</td><td>Y</td><td>N</td><td>N</td><td>N</td><td>N</td></tr>
  <tr><td>RIIMO</td><td>160</td><td>Y</td><td>Y</td><td>N</td><td>Y</td><td>Y</td><td>Y</td></tr>
  <tr><td>RPI-Command-Center</td><td>95</td><td>Y</td><td>Y</td><td>N</td><td>Y</td><td>Y</td><td>Y</td></tr>
  <tr><td>DAVID-HUB</td><td>104</td><td>Y</td><td>Y</td><td>N</td><td>Y</td><td>Y</td><td>Y</td></tr>
  <tr><td>sentinel</td><td>104</td><td>Y</td><td>Y</td><td>N</td><td>Y</td><td>Y</td><td>Y</td></tr>
  <tr><td>sentinel-v2</td><td>162</td><td>Y</td><td>Y</td><td>N</td><td>Y</td><td>Y</td><td>Y</td></tr>
</table>

<hr>
<p style="text-align: center; color: #666; font-size: 9pt;">
  RPI Master Remediation Plan | Generated by Claude Code GA | February 4, 2026<br>
  #RunningOurOwnRACE
</p>

</body>
</html>
