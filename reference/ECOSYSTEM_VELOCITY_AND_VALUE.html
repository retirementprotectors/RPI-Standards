<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RPI Ecosystem — Velocity & Value</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    * { box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 24px; background: #0f0f0f; color: #e0e0e0; }
    h1 { font-size: 1.5rem; margin-bottom: 8px; }
    .sub { color: #888; font-size: 0.9rem; margin-bottom: 24px; }
    .charts { display: grid; gap: 24px; max-width: 900px; }
    .chart-wrap { background: #1a1a1a; border-radius: 12px; padding: 20px; }
    .chart-wrap h2 { font-size: 1rem; margin: 0 0 16px 0; color: #ccc; }
    .chart-wrap canvas { max-height: 280px; }
    table { width: 100%; max-width: 900px; border-collapse: collapse; margin-top: 24px; background: #1a1a1a; border-radius: 12px; overflow: hidden; }
    th, td { padding: 12px 16px; text-align: left; border-bottom: 1px solid #2a2a2a; }
    th { background: #252525; color: #888; font-weight: 600; font-size: 0.75rem; text-transform: uppercase; }
    td { font-variant-numeric: tabular-nums; }
    td.num { text-align: right; }
    tr:last-child td { border-bottom: none; }
    .foot { margin-top: 24px; color: #666; font-size: 0.85rem; }
    @media print {
      body { background: #fff; color: #1a1a1a; padding: 16px; }
      .sub { color: #444; }
      .chart-wrap { background: #f8f8f8; border: 1px solid #e0e0e0; }
      .chart-wrap h2 { color: #333; }
      table { background: #fff; }
      th, td { border-bottom: 1px solid #ddd; }
      th { background: #f0f0f0; color: #333; }
      .foot { color: #555; }
      h2 { color: #333 !important; }
    }
  </style>
</head>
<body>
  <h1>RPI Ecosystem — Velocity & Value</h1>
  <p class="sub">Data from actual git repos. Value = firm equivalent (dev-days × 8 hrs × $150/hr). JDM opportunity/time value = 0.4 hr/commit × $500/hr. <strong>Total cost = firm + JDM time value.</strong></p>

  <h2 style="font-size:1.1rem; margin-top:32px; color:#ccc;">Monthly — from actual git history (Nov 2025–Feb 2026)</h2>
  <div class="charts">
    <div class="chart-wrap">
      <h2>Monthly activity — commits &amp; net lines</h2>
      <canvas id="monthlyActivity"></canvas>
    </div>
    <div class="chart-wrap">
      <h2>Cumulative value ($M) and cumulative total cost ($M) by month</h2>
      <canvas id="monthlyCumulative"></canvas>
    </div>
  </div>

  <h2 style="font-size:1.1rem; margin-top:32px; color:#ccc;">Daily (Feb 4–7, 2026)</h2>
  <div class="charts">
    <div class="chart-wrap">
      <h2>Daily activity — commits &amp; lines (net)</h2>
      <canvas id="activity"></canvas>
    </div>
    <div class="chart-wrap">
      <h2>Value delivered per day (traditional-firm equivalent, $K)</h2>
      <canvas id="valueDay"></canvas>
    </div>
    <div class="chart-wrap">
      <h2>Cumulative value ($M) and cumulative total cost ($M) — daily</h2>
      <canvas id="cumulative"></canvas>
    </div>
    <div class="chart-wrap">
      <h2>Calendar time we'd wait with a dev team (months) vs actual days</h2>
      <canvas id="calendar"></canvas>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th class="num">Commits</th>
        <th class="num">Lines +</th>
        <th class="num">Net</th>
        <th class="num">Dev-days equiv.</th>
        <th class="num">Firm calendar (mo)</th>
        <th class="num">Firm value ($)</th>
        <th class="num">JDM hrs</th>
        <th class="num">JDM value ($)</th>
        <th class="num">Total cost ($)</th>
        <th class="num">Cum. total cost ($)</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>2026-02-04</td><td class="num">116</td><td class="num">15,139</td><td class="num">10,922</td><td class="num">688</td><td class="num">12.5</td><td class="num">$825,600</td><td class="num">46.4</td><td class="num">$23,200</td><td class="num">$848,800</td><td class="num">$848,800</td></tr>
      <tr><td>2026-02-05</td><td class="num">28</td><td class="num">8,339</td><td class="num">7,384</td><td class="num">379</td><td class="num">6.9</td><td class="num">$454,800</td><td class="num">11.2</td><td class="num">$5,600</td><td class="num">$460,400</td><td class="num">$1,309,200</td></tr>
      <tr><td>2026-02-06</td><td class="num">44</td><td class="num">5,111</td><td class="num">4,431</td><td class="num">233</td><td class="num">4.2</td><td class="num">$279,600</td><td class="num">17.6</td><td class="num">$8,800</td><td class="num">$288,400</td><td class="num">$1,597,600</td></tr>
      <tr><td>2026-02-07</td><td class="num">2</td><td class="num">224</td><td class="num">204</td><td class="num">10</td><td class="num">0.2</td><td class="num">$12,000</td><td class="num">0.8</td><td class="num">$400</td><td class="num">$12,400</td><td class="num">$1,610,000</td></tr>
    </tbody>
  </table>
  <p class="foot">Ecosystem volume (current): 16 projects, ~281.5k lines. Repo start dates from git (earliest commit across remote branches): sentinel 2025-11-28; others 2026-02. Data: ECOSYSTEM_VELOCITY_MONTHLY.csv, ECOSYSTEM_VELOCITY_DATA.csv</p>

  <script>
    const monthlyData = [
      { month: '2025-11', commits: 26, lines_added: 23510, lines_deleted: 1393, net_lines: 22117, value_delivered_usd: 1282800, jdm_value_usd: 5200, total_cost_usd: 1288000, cumulative_value_usd: 1282800, cumulative_total_cost_usd: 1288000 },
      { month: '2025-12', commits: 54, lines_added: 41345, lines_deleted: 670, net_lines: 40675, value_delivered_usd: 2256000, jdm_value_usd: 10800, total_cost_usd: 2266800, cumulative_value_usd: 3538800, cumulative_total_cost_usd: 3554800 },
      { month: '2026-01', commits: 238, lines_added: 393642, lines_deleted: 292111, net_lines: 101531, value_delivered_usd: 21471600, jdm_value_usd: 47600, total_cost_usd: 21519200, cumulative_value_usd: 25010400, cumulative_total_cost_usd: 25075200 },
      { month: '2026-02', commits: 240, lines_added: 37300, lines_deleted: 8453, net_lines: 28847, value_delivered_usd: 2034000, jdm_value_usd: 48000, total_cost_usd: 2082000, cumulative_value_usd: 27044400, cumulative_total_cost_usd: 27156000 }
    ];
    const monthlyLabels = monthlyData.map(function(d) { return d.month; });
    const grid = { color: '#333' };
    const blue = 'rgb(59, 130, 246)';
    const green = 'rgb(34, 197, 94)';
    const amber = 'rgb(245, 158, 11)';

    new Chart(document.getElementById('monthlyActivity'), {
      type: 'bar',
      data: {
        labels: monthlyLabels,
        datasets: [
          { label: 'Commits', data: monthlyData.map(function(d) { return d.commits; }), backgroundColor: blue, yAxisID: 'y' },
          { label: 'Net lines', data: monthlyData.map(function(d) { return d.net_lines; }), type: 'line', borderColor: green, backgroundColor: 'transparent', fill: false, yAxisID: 'y1' }
        ]
      },
      options: {
        responsive: true,
        scales: { x: { grid: grid }, y: { grid: grid, title: { display: true, text: 'Commits' } }, y1: { position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: 'Net lines' } } }
      }
    });

    new Chart(document.getElementById('monthlyCumulative'), {
      type: 'line',
      data: {
        labels: monthlyLabels,
        datasets: [
          { label: 'Cum. firm value ($M)', data: monthlyData.map(function(d) { return d.cumulative_value_usd / 1e6; }), borderColor: amber, backgroundColor: 'transparent', fill: false },
          { label: 'Cum. total cost = firm + JDM ($M)', data: monthlyData.map(function(d) { return d.cumulative_total_cost_usd / 1e6; }), borderColor: 'rgb(239, 68, 68)', backgroundColor: 'transparent', fill: false }
        ]
      },
      options: {
        responsive: true,
        scales: { x: { grid: grid }, y: { grid: grid, title: { display: true, text: '$M' } } }
      }
    });

    const data = [
      { date: '2026-02-04', commits: 116, lines_added: 15139, lines_deleted: 4217, net_lines: 10922, dev_days_equivalent: 688, calendar_months_firm: 12.5, value_delivered_usd: 825600, jdm_hours_est: 46.4, jdm_value_usd: 23200, total_cost_usd: 848800, cumulative_lines: 10922, cumulative_value_usd: 825600, cumulative_total_cost_usd: 848800 },
      { date: '2026-02-05', commits: 28, lines_added: 8339, lines_deleted: 955, net_lines: 7384, dev_days_equivalent: 379, calendar_months_firm: 6.9, value_delivered_usd: 454800, jdm_hours_est: 11.2, jdm_value_usd: 5600, total_cost_usd: 460400, cumulative_lines: 18306, cumulative_value_usd: 1280400, cumulative_total_cost_usd: 1309200 },
      { date: '2026-02-06', commits: 44, lines_added: 5111, lines_deleted: 680, net_lines: 4431, dev_days_equivalent: 233, calendar_months_firm: 4.2, value_delivered_usd: 279600, jdm_hours_est: 17.6, jdm_value_usd: 8800, total_cost_usd: 288400, cumulative_lines: 22737, cumulative_value_usd: 1551000, cumulative_total_cost_usd: 1597600 },
      { date: '2026-02-07', commits: 2, lines_added: 224, lines_deleted: 20, net_lines: 204, dev_days_equivalent: 10, calendar_months_firm: 0.2, value_delivered_usd: 12000, jdm_hours_est: 0.8, jdm_value_usd: 400, total_cost_usd: 12400, cumulative_lines: 22941, cumulative_value_usd: 1563000, cumulative_total_cost_usd: 1610000 }
    ];
    const labels = data.map(function(d) { return d.date.slice(5); });

    new Chart(document.getElementById('activity'), {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [
          { label: 'Commits', data: data.map(function(d) { return d.commits; }), backgroundColor: blue, yAxisID: 'y' },
          { label: 'Net lines', data: data.map(function(d) { return d.net_lines; }), type: 'line', borderColor: green, backgroundColor: 'transparent', fill: false, yAxisID: 'y1' }
        ]
      },
      options: {
        responsive: true,
        scales: { x: { grid: grid }, y: { grid: grid, title: { display: true, text: 'Commits' } }, y1: { position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: 'Net lines' } } }
      }
    });

    new Chart(document.getElementById('valueDay'), {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{ label: 'Value ($K)', data: data.map(function(d) { return d.value_delivered_usd / 1000; }), backgroundColor: amber }]
      },
      options: {
        responsive: true,
        scales: { x: { grid: grid }, y: { grid: grid, title: { display: true, text: '$K' } } }
      }
    });

    new Chart(document.getElementById('cumulative'), {
      type: 'line',
      data: {
        labels: labels,
        datasets: [
          { label: 'Cum. firm value ($M)', data: data.map(function(d) { return d.cumulative_value_usd / 1e6; }), borderColor: amber, backgroundColor: 'transparent', fill: false, yAxisID: 'y' },
          { label: 'Cum. total cost = firm + JDM ($M)', data: data.map(function(d) { return d.cumulative_total_cost_usd / 1e6; }), borderColor: 'rgb(239, 68, 68)', backgroundColor: 'transparent', fill: false, yAxisID: 'y' }
        ]
      },
      options: {
        responsive: true,
        scales: { x: { grid: grid }, y: { grid: grid, title: { display: true, text: '$M' } } }
      }
    });

    new Chart(document.getElementById('calendar'), {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [
          { label: 'Firm calendar (months to get this day\'s output)', data: data.map(function(d) { return d.calendar_months_firm; }), backgroundColor: 'rgb(239, 68, 68)' },
          { label: 'Actual (days)', data: [1, 1, 1, 1], backgroundColor: green }
        ]
      },
      options: {
        responsive: true,
        scales: { x: { grid: grid }, y: { grid: grid, title: { display: true, text: 'Months (firm) / Days (actual)' } } }
      }
    });
  </script>
</body>
</html>
